<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Bread: BreadVector3.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.1 -->
<h1>BreadVector3.h</h1><div class="fragment"><pre>00001 
00002 <span class="preprocessor">#ifndef _BreadVector3_h_</span>
00003 <span class="preprocessor"></span><span class="preprocessor">#define _BreadVector3_h_</span>
00004 <span class="preprocessor"></span>
00005 <span class="preprocessor">#include "BreadMath.h"</span>
00006 
00007 <span class="keyword">namespace </span>Bread
00008 {
00009     <span class="keyword">class </span>cVector3
00010     {
00011     <span class="keyword">public</span>:
00012         cVector3()
00013         {
00014         }
00015 
00016         cVector3(<span class="keywordtype">float</span> x, <span class="keywordtype">float</span> y, <span class="keywordtype">float</span> z) : m_x(x), m_y(y), m_z(z)
00017         {
00018         }
00019 
00020         cVector3(<span class="keyword">const</span> cVector3&amp; v)
00021         {
00022             m_x = v.m_x;
00023             m_y = v.m_y;
00024             m_z = v.m_z;
00025         }
00026 
00027         ~cVector3()
00028         {
00029         }
00030 
00031         <span class="keyword">inline</span> cVector3&amp; operator = (<span class="keyword">const</span> cVector3&amp; v)
00032         {
00033             m_x = v.m_x;
00034             m_y = v.m_y;
00035             m_z = v.m_z;
00036 
00037             <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00038         }
00039 
00040         <span class="keyword">inline</span> cVector3 operator - ()<span class="keyword"> const</span>
00041 <span class="keyword">        </span>{
00042             <span class="keywordflow">return</span> cVector3(-m_x, -m_y, -m_z);
00043         }
00044 
00045         <span class="keyword">inline</span> cVector3 operator + (<span class="keyword">const</span> cVector3&amp; v)<span class="keyword"> const</span>
00046 <span class="keyword">        </span>{
00047             <span class="keywordflow">return</span> cVector3(m_x + v.m_x, m_y + v.m_y, m_z + v.m_z);
00048         }
00049 
00050         <span class="keyword">inline</span> cVector3 operator - (<span class="keyword">const</span> cVector3&amp; v)<span class="keyword"> const</span>
00051 <span class="keyword">        </span>{
00052             <span class="keywordflow">return</span> cVector3(m_x - v.m_x, m_y - v.m_y, m_z - v.m_z);
00053         }
00054 
00055         <span class="keyword">inline</span> cVector3 operator * (<span class="keyword">const</span> cVector3&amp; v)<span class="keyword"> const</span>
00056 <span class="keyword">        </span>{
00057             <span class="keywordflow">return</span> cVector3(m_x * v.m_x, m_y * v.m_y, m_z * v.m_z);
00058         }
00059 
00060         <span class="keyword">inline</span> cVector3 operator / (<span class="keyword">const</span> cVector3&amp; v)<span class="keyword"> const</span>
00061 <span class="keyword">        </span>{
00062             assert(v.m_x != 0.0f &amp;&amp; v.m_y != 0.0f &amp;&amp; v.m_z != 0.0f);
00063 
00064             <span class="keywordflow">return</span> cVector3(m_x / v.m_x, m_y / v.m_y, m_z / v.m_z);
00065         }
00066 
00067         <span class="keyword">inline</span> <span class="keyword">const</span> cVector3&amp; operator += (<span class="keyword">const</span> cVector3&amp; v)
00068         {
00069             m_x += v.m_x;
00070             m_y += v.m_y;
00071             m_z += v.m_z;
00072 
00073             <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00074         }
00075 
00076         <span class="keyword">inline</span> <span class="keyword">const</span> cVector3&amp; operator -= (<span class="keyword">const</span> cVector3&amp; v)
00077         {
00078             m_x -= v.m_x;
00079             m_y -= v.m_y;
00080             m_z -= v.m_z;
00081 
00082             <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00083         }
00084 
00085         <span class="keyword">inline</span> <span class="keyword">const</span> cVector3&amp; operator *= (<span class="keyword">const</span> cVector3&amp; v)
00086         {
00087             m_x *= v.m_x;
00088             m_y *= v.m_y;
00089             m_z *= v.m_z;
00090 
00091             <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00092         }
00093 
00094         <span class="keyword">inline</span> <span class="keyword">const</span> cVector3&amp; operator /= (<span class="keyword">const</span> cVector3&amp; v)
00095         {
00096             assert(v.m_x != 0.0f &amp;&amp; v.m_y != 0.0f &amp;&amp; v.m_z != 0.0f);
00097 
00098             m_x /= v.m_x;
00099             m_y /= v.m_y;
00100             m_z /= v.m_z;
00101 
00102             <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00103         }
00104         
00105         <span class="keyword">inline</span> cVector3 operator * (<span class="keywordtype">float</span> s)<span class="keyword"> const</span>
00106 <span class="keyword">        </span>{
00107             <span class="keywordflow">return</span> cVector3(m_x * s, m_y * s, m_z * s);
00108         }
00109 
00110         <span class="keyword">inline</span> cVector3 operator / (<span class="keywordtype">float</span> s)<span class="keyword"> const</span>
00111 <span class="keyword">        </span>{
00112             assert(s != 0.0f);
00113 
00114             <span class="keywordtype">float</span> inv = 1.0f/s;
00115             <span class="keywordflow">return</span> cVector3(m_x * inv, m_y * inv, m_z * inv);
00116         }
00117 
00118         <span class="keyword">inline</span> <span class="keyword">const</span> cVector3&amp; operator *= (<span class="keywordtype">float</span> s)
00119         {
00120             m_x *= s;
00121             m_y *= s;
00122             m_z *= s;
00123 
00124             <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00125         }
00126 
00127         <span class="keyword">inline</span> <span class="keyword">const</span> cVector3&amp; operator /= (<span class="keywordtype">float</span> s)
00128         {
00129             assert(s != 0.0f);
00130 
00131             <span class="keywordtype">float</span> inv = 1.0f/s;
00132 
00133             m_x *= inv;
00134             m_y *= inv;
00135             m_z *= inv;
00136 
00137             <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00138         }
00139         
00140         
00141         <span class="keyword">inline</span> <span class="keyword">friend</span> cVector3 operator * (<span class="keywordtype">float</span> s, <span class="keyword">const</span> cVector3&amp; v)
00142         {
00143             <span class="keywordflow">return</span> v * s;
00144         }
00145         <span class="keyword">inline</span> <span class="keyword">friend</span> cVector3 operator / (<span class="keywordtype">float</span> s, <span class="keyword">const</span> cVector3&amp; v)
00146         {
00147             assert(s != 0.0f);
00148 
00149             <span class="keywordflow">return</span> v / s;
00150         }
00151         <span class="keyword">inline</span> <span class="keywordtype">float</span>&amp; operator [] (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i)
00152         { 
00153             <span class="keywordflow">return</span> (&amp;m_x)[i]; 
00154         }
00155         <span class="keyword">inline</span> <span class="keywordtype">float</span> operator [] (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i)<span class="keyword"> const </span>
00156 <span class="keyword">        </span>{ 
00157             <span class="keywordflow">return</span> (&amp;m_x)[i]; 
00158         }
00159 
00160         <span class="keyword">inline</span> <span class="keywordtype">float</span> length()<span class="keyword"> const</span>
00161 <span class="keyword">        </span>{
00162             <span class="keywordflow">return</span> cMath::sqrt(lengthSquare());
00163         }
00164         <span class="keyword">inline</span> <span class="keywordtype">float</span> lengthSquare()<span class="keyword"> const</span>
00165 <span class="keyword">        </span>{
00166             <span class="keywordflow">return</span> m_x*m_x + m_y*m_y + m_z*m_z;
00167         }
00168         <span class="keyword">inline</span> <span class="keywordtype">float</span> length(<span class="keyword">const</span> cVector3&amp; v)<span class="keyword"> const</span>
00169 <span class="keyword">        </span>{
00170             cVector3 l = v - *<span class="keyword">this</span>;
00171             <span class="keywordflow">return</span> l.length();
00172         }
00173         <span class="keyword">inline</span> <span class="keywordtype">float</span> lengthSquare(<span class="keyword">const</span> cVector3&amp; v)<span class="keyword"> const</span>
00174 <span class="keyword">        </span>{
00175             cVector3 l = v - *<span class="keyword">this</span>;
00176             <span class="keywordflow">return</span> l.lengthSquare();
00177         }
00178 
00179         <span class="keyword">inline</span> <span class="keywordtype">void</span> normalize()
00180         {
00181             <span class="keywordtype">float</span> inv = cMath::inv(length());
00182 
00183             m_x *= inv;
00184             m_y *= inv;
00185             m_z *= inv;
00186         }
00187 
00188         <span class="keyword">inline</span> <span class="keywordtype">float</span> dot(<span class="keyword">const</span> cVector3&amp; v)<span class="keyword"> const</span>
00189 <span class="keyword">        </span>{
00190             <span class="keywordflow">return</span> m_x * v.m_x + m_y * v.m_y + m_z * v.m_z;
00191         }
00192 
00196         <span class="keyword">inline</span> cVector3 proj(<span class="keyword">const</span> cVector3&amp; w)<span class="keyword"> const</span>
00197 <span class="keyword">        </span>{
00198             <span class="keywordtype">float</span> a = dot(w)/w.lengthSquare();
00199             <span class="keywordflow">return</span> w * a;
00200         }
00204         <span class="keyword">inline</span> cVector3 perp(<span class="keyword">const</span> cVector3&amp; w)<span class="keyword"> const</span>
00205 <span class="keyword">        </span>{
00206             <span class="keywordflow">return</span> *<span class="keyword">this</span> - proj(w);
00207         }
00208 
00209         <span class="keyword">inline</span> cVector3 cross(<span class="keyword">const</span> cVector3&amp; v)<span class="keyword"> const</span>
00210 <span class="keyword">        </span>{
00211             <span class="keywordflow">return</span> cVector3(m_y * v.m_z - m_z * v.m_y,
00212                             m_z * v.m_x - m_x * v.m_z,
00213                             m_x * v.m_y - m_y * v.m_x);
00214         }
00215 
00216 
00220         <span class="keyword">inline</span> <span class="keywordtype">float</span> angle(<span class="keyword">const</span> cVector3&amp; v)<span class="keyword"> const</span>
00221 <span class="keyword">        </span>{
00222             <span class="keywordtype">float</span> d = dot(v);
00223             <span class="keywordtype">float</span> l = length() * v.length();
00224             
00225             assert(l != 0.0f);
00226 
00227             <span class="keywordflow">return</span> cMath::arcCos(d/l);
00228         }
00229 
00238         <span class="keyword">inline</span> <span class="keywordtype">int</span> determinShortAngle(<span class="keyword">const</span> cVector3&amp; u, <span class="keyword">const</span> cVector3&amp; v, <span class="keyword">const</span> cVector3&amp; w)<span class="keyword"> const</span>
00239 <span class="keyword">        </span>{
00240             <span class="keywordflow">if</span> (cVector3::scalarTripleProduct(u, v, w) &gt; 0.0f)
00241                 <span class="keywordflow">return</span> 0;
00242             <span class="keywordflow">return</span> 1;
00243         }
00247         <span class="keyword">static</span> <span class="keywordtype">float</span> scalarTripleProduct(<span class="keyword">const</span> cVector3&amp; u, <span class="keyword">const</span> cVector3&amp; v, <span class="keyword">const</span> cVector3&amp; w)
00248         {
00249             <span class="keywordflow">return</span> u.dot(v.cross(w));
00250         }
00254         <span class="keyword">static</span> cVector3 vectorTripleProduct(<span class="keyword">const</span> cVector3&amp; u, <span class="keyword">const</span> cVector3&amp; v, <span class="keyword">const</span> cVector3&amp; w)
00255         {
00256             u.cross(v.cross(w));
00257         }
00258 
00262         <span class="keyword">inline</span> <span class="keywordtype">bool</span> inTriangle(<span class="keyword">const</span> cVector3&amp; p0, <span class="keyword">const</span> cVector3&amp; p1, <span class="keyword">const</span> cVector3&amp; p2)<span class="keyword"> const</span>
00263 <span class="keyword">        </span>{
00264             cVector3 v0 = p1 - p0;
00265             cVector3 v1 = p2 - p1;
00266             cVector3 v2 = p0 - p2;
00267 
00268             cVector3 w0 = *<span class="keyword">this</span> - p0;
00269             cVector3 w1 = *<span class="keyword">this</span> - p1;
00270             cVector3 w2 = *<span class="keyword">this</span> - p2;
00271 
00272             cVector3 triangleNorm = v0.cross(v1);
00273 
00274             cVector3 n0 = v0.cross(w0);
00275             cVector3 n1 = v1.cross(w1);
00276             cVector3 n2 = v2.cross(w2);
00277 
00278             <span class="keywordtype">float</span> r0 = triangleNorm.dot(n0);
00279             <span class="keywordtype">float</span> r1 = triangleNorm.dot(n1);
00280             <span class="keywordtype">float</span> r2 = triangleNorm.dot(n2);
00281 
00282             <span class="keywordflow">if</span> ((r0 &lt; 0.0f &amp;&amp; r1 &lt; 0.0f &amp;&amp; r2 &lt; 0.0f) || 
00283                 (r0 &gt;= 0.0f &amp;&amp; r1 &gt;= 0.0f &amp;&amp; r2 &gt;= 0.0f))
00284                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00285 
00286             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00287         }
00288 
00289 
00290     <span class="keyword">public</span>:
00291         <span class="keywordtype">float</span> m_x;
00292         <span class="keywordtype">float</span> m_y;
00293         <span class="keywordtype">float</span> m_z;
00294 
00295         <span class="keyword">static</span> cVector3 ZERO;
00296         <span class="keyword">static</span> cVector3 X_BASIS;
00297         <span class="keyword">static</span> cVector3 Y_BASIS;
00298         <span class="keyword">static</span> cVector3 Z_BASIS;
00299 
00300     };
00301 }
00302 
00303 
00304 
00305 
00306 
00307 
00308 
00309 
00310 <span class="preprocessor">#endif</span>
00311 <span class="preprocessor"></span>
00312 
00313 
00314 
00315 
</pre></div><hr><address style="align: right;"><small>
Generated on Sat Jul 25 12:39:42 2009 for Bread by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.1 using KingsTools</small></address>
</body>
</html>
